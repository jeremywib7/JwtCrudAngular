<body>
<div class="container-fluid page">
  <nav aria-label="breadcrumb" class="main-breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/int/user">User</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ editMode ? 'Edit' : 'Add'}} User</li>
    </ol>
  </nav>
  <div class="d-flex page__box p-3 mt-2 ">{{ editMode ? 'Edit' : 'Add'}} User</div>
  <div class="page__content shadow p-3 position-relative">
    <div class="card-body">
      <form [formGroup]="reactiveForm" (ngSubmit)="submit()">

        <!-- Form Group (username)-->
        <div class="mb-3">
          <div class="form-group">
            <label for="username" class="small mb-1">Username</label>
            <input type="text" name="username" class="form-control" id="username" placeholder="Username"
                   formControlName="username" [readonly]="editMode">
            <div *ngIf="reactiveForm.controls.username.errors && (reactiveForm.controls.username.touched ||
                           reactiveForm.controls.username.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','username')">
                Username is required
              </div>
              <div *ngIf="reactiveForm.hasError('pattern','username')">
                Username format is invalid
              </div>
              <div *ngIf="reactiveForm.hasError('minlength','username')">
                Username must be 3 characters or more
              </div>
            </div>
          </div>
        </div>
        <!-- Form Row-->
        <div class="row gx-3 mb-3">
          <!-- Form Group (first name)-->
          <div class="col-md-6">
            <label for="firstName" class="small mb-1">First Name</label>
            <input type="text" name="firstName" class="form-control" id="firstName"
                   placeholder="First name"
                   formControlName="userFirstName">
            <div *ngIf="reactiveForm.controls.userFirstName.errors && (reactiveForm.controls.userFirstName.touched ||
                           reactiveForm.controls.userFirstName.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','userFirstName')">
                First Name is required
              </div>
              <div *ngIf="reactiveForm.hasError('pattern','userFirstName')">
                First Name format is invalid
              </div>
              <div *ngIf="reactiveForm.hasError('minlength','userFirstName')">
                First Name must be 3 characters or more
              </div>
            </div>
          </div>
          <!-- Form Group (last name)-->
          <div class="col-md-6">
            <label for="lastName" class="small mb-1">Last Name</label>
            <input type="text" name="lastName" class="form-control" id="lastName"
                   placeholder="Last name"
                   formControlName="userLastName">
            <div *ngIf="reactiveForm.controls.userLastName.errors && (reactiveForm.controls.userLastName.touched ||
                           reactiveForm.controls.userLastName.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','userLastName')">
                Last Name is required
              </div>
              <div *ngIf="reactiveForm.hasError('pattern','userLastName')">
                Last Name format is invalid
              </div>
              <div *ngIf="reactiveForm.hasError('minlength','userLastName')">
                Last Name must be 3 characters or more
              </div>
            </div>
          </div>
        </div>
        <!-- Form Row-->
        <fieldset class="row mb-3">
          <legend class="small col-sm-2 pt-0">Gender</legend>
          <div class="col-sm-10">
            <div class="form-check">
              <input name="gender" class="form-check-input" type="radio" id="maleRadioButton"
                     value="Male" formControlName="gender">
              <label class="small" for="maleRadioButton">
                Male
              </label>
            </div>
            <div class="form-check">
              <input name="gender" class="form-check-input" type="radio" id="femaleRadioButton"
                     value="Female" formControlName="gender">
              <label class="small" for="femaleRadioButton">
                Female
              </label>
            </div>
            <div *ngIf="reactiveForm.controls.gender.errors && (reactiveForm.controls.gender.touched ||
                           reactiveForm.controls.gender.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','gender')">
                Gender is not selected
              </div>
            </div>
          </div>
        </fieldset>
        <!-- Form Row        -->
        <div class="row gx-3 mb-3">
          <!-- Form Group (organization name)-->
          <div class="col-md-6">
            <div class="form-group" formGroupName="role">
              <label for="editInputRole" class="small mb-1">Role</label>
              <select name="rank" id="editInputRole" class="form-select" formControlName="roleName">
                <option disabled>Select Role</option>
                <option value="Admin">Admin</option>
                <option value="User">User</option>
                <option value="Customer">Customer</option>
              </select>
              <div *ngIf="reactiveForm.get('role.roleName').errors && (reactiveForm.get('role.roleName').touched ||
                           reactiveForm.get('role.roleName').dirty) " style="color: red">
                <div *ngIf="reactiveForm.hasError('required', 'role.roleName')">
                  <!--                <div *ngIf="reactiveForm.hasError('required','roleName')">-->
                  Role is required
                </div>
              </div>
            </div>

          </div>
          <!-- Form Group (location)-->
          <div class="col-md-6">
            <label for="bankAccount" class="small mb-1">Bank Account</label>
            <input type="number" name="bankAccount" class="form-control" id="bankAccount"
                   placeholder="Bank Account" formControlName="bankAccount">
            <div *ngIf="reactiveForm.controls.bankAccount.errors && (reactiveForm.controls.bankAccount.touched ||
                           reactiveForm.controls.bankAccount.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','bankAccount')">
                Bank Account is required
              </div>
              <div *ngIf="reactiveForm.hasError('pattern','bankAccount')">
                Bank Account must be a number
              </div>
              <div *ngIf="reactiveForm.hasError('min','bankAccount')">
                Bank Account minimum is 5 characters
              </div>
              <div *ngIf="reactiveForm.hasError('max','bankAccount')">
                Bank Account maximum is 10 characters
              </div>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label for="email" class="small mb-1">Email</label>
          <input type="text" name="email" class="form-control" id="email" placeholder="Email"
                 formControlName="email">
          <div *ngIf="reactiveForm.controls.email.errors && (reactiveForm.controls.email.touched ||
                           reactiveForm.controls.email.dirty) " style="color: red">
            <div *ngIf="reactiveForm.hasError('required','email')">
              Email is required
            </div>
            <div *ngIf="reactiveForm.hasError('pattern','email')">
              Email format is invalid
            </div>
            <div *ngIf="reactiveForm.hasError('minlength','email')">
              Email must be 3 characters or more
            </div>
          </div>
        </div>

        <div class="row gx-3 mb-3">
          <div class="col-md-6">
            <label class="small mb-1">Date Joined</label>
            <input
              class="form-control"
              #datepickerYMD="bsDatepicker"
              bsDatepicker
              formControlName="dateJoined"
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }">
            <div *ngIf="reactiveForm.controls.dateJoined.errors && (reactiveForm.controls.dateJoined.touched ||
                           reactiveForm.controls.dateJoined.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','dateJoined')">
                Date is required
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <label for="phoneNumber" class="small mb-1">Phone</label>
            <input type="text" name="phoneNumber" class="form-control" id="phoneNumber"
                   placeholder="Phone" formControlName="phoneNumber">
            <div *ngIf="reactiveForm.controls.phoneNumber.errors && (reactiveForm.controls.phoneNumber.touched ||
                           reactiveForm.controls.phoneNumber.dirty) " style="color: red">
              <div *ngIf="reactiveForm.hasError('required','phoneNumber')">
                Phone number is required
              </div>
              <div *ngIf="reactiveForm.hasError('pattern','phoneNumber')">
                Phone number format is invalid
              </div>
              <div *ngIf="reactiveForm.hasError('minlength','phoneNumber')">
                Phone number must be between 10 and 14 characters
              </div>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="address" class="small mb-1">Address</label>
          <input type="text" name="address" class="form-control" id="address" placeholder="Address"
                 formControlName="address">
          <div *ngIf="reactiveForm.controls.address.errors && (reactiveForm.controls.address.touched ||
                           reactiveForm.controls.address.dirty) " style="color: red">
            <div *ngIf="reactiveForm.hasError('required','address')">
              Address is required
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="customFile">Profile Picture</label>
          <input name="profilePicture" type="file" accept="image/*" (change)="onSelectFile($event)"
                 class="form-control" id="customFile" *ngIf="!editMode" formControlName="imageUrl">
          <input name="profilePicture" type="file" accept="image/*" (change)="onSelectFile($event)"
                 class="form-control" id="editFIle" *ngIf="editMode">
          <div *ngIf="reactiveForm.controls.imageUrl.invalid && (reactiveForm.controls.imageUrl.touched ||
                             reactiveForm.controls.imageUrl.dirty) " style="color: red">
            <div *ngIf="reactiveForm.hasError('required','imageUrl')">
              Profile picture is required
            </div>
          </div>
        </div>

        <div class="form-group">
          <img
            [lazyLoad]=" apiBaseUrl +'/'+ projectName +'/images/user/download/' + user?.imageUrl  "
            alt="User Image">
        </div>
      </form>
    </div>
    <form [formGroup]="reactiveForm" (ngSubmit)="submit()">
      <div class="modal-footer">
        <button type="button" id="add-member-form" class="btn btn-secondary" data-dismiss="modal"
                routerLink="/int/user">Close
        </button>
        <!--                    <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">Save changes</button>-->
        <ngid-button
          type="submit"
          color="PRIMARY"
          size="MD"
          [disabled]="false">
          {{ editMode ? 'Save Changes' : 'Add User'}}
        </ngid-button>
      </div>
    </form>

    <div class="card-body">
    </div>

  </div>
</div>
</body>
